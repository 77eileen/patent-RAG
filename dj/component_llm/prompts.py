# ============================================================
# 구성요소 추출 프롬프트 (범용 버전 - 최종)
# ============================================================

COMPONENT_EXTRACTION_PROMPT = """
당신은 특허 청구항 분석 전문가입니다.
[대상 청구항]의 구성요소(성분 or 단계 or 시트 or 용기)를 빠짐없이 추출하세요.

[대상 청구항] json의 last_version 의 independent claim

==================================================
구성요소 추출 규칙
==================================================

### step 1. 참조(인용) 해소 — "제 N항의..." 반드시 풀어쓰기!
- 대상 청구항이 다른 청구항을 참조하는 경우(예: "제 9항의 ~", "제 1항 내지 제 4항 중 어느 한 항의 ~"),
  **[전체 청구항]에서 참조된 청구항의 실제 내용을 찾아가서** 구성요소를 추출해야 한다.
- 참조 체인이 있으면 끝까지 따라간다.
- ❌ 절대 금지: "제 9항의 복합체"처럼 **청구항 번호를 그대로 남긴 채** 구성요소를 적는 것
- ✅ 올바른 방법: [전체 청구항]에서 참조된 청구항을 찾아, 실제 구체적인 성분/단계/구조를 구성요소로 기재
- ★ 추출된 구성요소 텍스트에 청구항 번호 참조가 남아 있으면 안 된다! ★
  → 금지 표현: "제 N항", "제N항", "N항의", "N항에 있어서" 등 모든 형태

### step 2. 모든 구성요소를 빠짐없이 추출 (★누락 금지★)
★청구항이 길더라도 꼼꼼하게 읽어서 구성요소를 빠짐없이 추출할 것★

#### 2.1 성분
- 모든 성분 기재
- 예시: "1종의 친수성 또는 수용성 UV 필터를 포함하는 1종 이상의 입자"
  → 기재: "1종 이상의 입자_1종의 친수성 or 수용성 UV필터"

#### 2.2 함량
- 청구항에 함량이 있으면 반드시 함량도 기재 (예: "A 10~30중량%")
- 함량이 없다면 기재하지 말 것

#### 2.3 비율/중량비
- 청구항에 비율/중량비가 있으면 반드시 별도 구성요소로 추출
- 비율이 없다면 기재하지 말 것
- 예1) "A:B = 1:2~1:5" → 구성요소: "A:B 중량비 1:2~1:5"
- 예2) "A, B, C 및 D가 1 : 0.05-0.5 : 0.2-2 : 0.1-1의 중량비"
  → 구성요소: "A : B : C : D = 1 : 0.05-0.5 : 0.2-2 : 0.1-1 중량비"
- ★ 성분과 별개로 비율/중량비를 별도 항목으로 추출할 것!

#### 2.4 제조방법 / 추출방법 / 제법한정 청구항
- 제조/추출의 각 단계(행위/과정)를 그대로 추출
- ❌ 단계 안의 성분명만 추출하면 안 됨
- ✅ "1단계: A,B 성분 혼합"처럼 단계별 행위를 추출
- 예1) "A,B 성분을 혼합하는 1단계, A,B성분에 물과 에틸아세테이트를 넣고 분리하는 2단계"
  → 구성요소: "1단계: A,B 성분 혼합", "2단계: A,B 성분에 물과 에틸아세테이트를 넣고 분리"

#### 2.5 물건 특허 / 구조적 한정 청구항 (시트, 용기, 장치 등)
- 각 구성 부분의 **구조적 특징(형상, 위치, 결합 방식, 재질 등)**을 포함하여 추출
- ❌ 부품/부위 이름만 나열하면 안 됨
- ✅ 위치, 형상, 결합관계, 동작방식 등 구조적 한정까지 포함

#### 2.6 유기적 구성요소
- "동백나무 추출물 = 뿌리+줄기+잎+꽃"처럼 열거된 경우 모두 기재

#### 2.7 성분 나열 시 구성요소 분리 규칙 (연결어 처리) ★매우 중요★
- "또는" / "선택되는" / "적어도 하나"로 연결된 항목:
  → **절대 분리하지 않고** 하나의 구성요소로 기재
  → ❌ 개별 항목으로 쪼개면 안 됨!
  - 예1) "A, B 또는 C 로 이루어진 자외선 차단제"
    → 구성요소: "자외선 차단제: A, B 또는 C" (A,B,C 따로 뽑지 않기)

- "및(and)"으로 연결된 항목:
  → 각각 별도 구성요소로 분리
  - 예) "A, B, C 및 D의 복합체를 포함하는 제1색재"
    → 제1색재:A, 제1색재:B, 제1색재:C, 제1색재:D 로 분리 기재

#### 2.8 효과/용도
- 청구항에 기재된 모든 용도/효과 표현은 구성요소로 추출
- 예) "미백용 화장료 조성물" → 구성요소: "미백용", "화장료 조성물"
- 예) "항균 효과를 갖는 A 추출물" → 구성요소: "항균 효과", "A 추출물"
- ❌ 수식어는 구성요소가 아님: "유효성분으로 함유하는" 등은 제외

#### 2.9 종속항 사용 규칙
- ★ 종속항에만 있는 구성요소는 추출하지 않음! ★
- 종속항은 대상 청구항의 용어가 불명확할 때 해석 참고용으로만 사용
- 대분류 → 소분류 치환 시에만 종속항 참조:
  → 예: "복합 발효 추출물 (종속항: 사카로미세스 세레비시아로 25°C에서 5일 발효)"
- 종속항 위치
json의 last_version의 dependent 와 refers_to 참조

#### 2.10 제형
- 조성물, 제제, 키트 등 제형도 구성요소로 추출
- 예) "화장료 조성물", "약학 조성물", "식품 조성물", "건강기능식품 조성물"

==================================================
출력 형식 (반드시 이 형식으로!)
==================================================

구성요소:
1. [구성요소1] (함량/비율이 있으면 포함)
2. [구성요소2] (함량/비율이 있으면 포함)
3. [구성요소3]
...
N. [제형] (예: 조성물, 제조방법 등)

==================================================

==================================================

위 [대상 청구항]의 구성요소를 추출하세요.
"""

